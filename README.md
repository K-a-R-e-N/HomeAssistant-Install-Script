## Скрипт установки Home Assistant и HASS конфигуратора на Raspberry Pi
_Homeb Assistant Installation Script_

Cкрипт, который будет ставить самые свежие версии Home Assistant и HASS конфигуратора. Так же в скрипте учтены важные моменты и проделаны специальные настройки, чтобы у вас не возникало ни каких проблем во время установки.

![logo](https://sprut.ai/static/media/cache/00/05/83/40/2369/50963/1600x_image.png?1580879891)   

### Реализованные функции
* Настроенный файл конфигурации уже импортирован
* Реализовано два отдельных сервиса для автозапуска Home Assistant и HASS конфигуратора
* Создание резервной копии конфигурационных файлов Homeb Assistant при его наличии с дальнейшей возможностью восстановления через соответствующее меню
* Автоматическая проверка ранее установленных версии с выводом вариантов, для дальнейших действий
* Учтены и проделаны важные модификации, после которых переустановка Home Assistant, не будут вызывать каких либо проблем
* Применены специальные права для правильного взаимодействия с платой Raspberry Pi
* Реализована возможность полной деинсталляции Home Assistant и его зависимостей
* В конце установки реализовал вывод полезной информации
* Для актуального состояния скрипта, буду постоянно обновлять и дополнять код

### УСТАНОВКА
Прежде чем начать, убедитесь, что на вашей Raspberry Pi установлена последняя версия Raspbian OS и обновлены все пакеты до актуального состояния. Для этого введите следующую команду в консоль терминала:

```
sudo rm -Rf /var/lib/apt/lists
sudo apt update && sudo apt upgrade -y && sudo apt install git -y
#Готово
```

Для запуска в обычном режиме, где будет доступно меню для работы со скриптом, введите следующие команды:
```
git clone https://github.com/K-a-R-e-N/HomeAssistant-Install-Script
bash ~/HomeAssistant-Install-Script/InstallHA.sh
#Готово
```

Также, скрипт поддерживает ключи тихой установки.
Для чистой установки на новую систему в тихом режиме, надо скопировать нижние строки и ввести в консоль терминала:
```
git clone https://github.com/K-a-R-e-N/HomeAssistant-Install-Script
bash ~/HomeAssistant-Install-Script/InstallHA.sh -i -d
#Готово
```
Во второй строке, можно изменить ключи тихой установки на другие... Если дописать ключ `-u` перед ключом `-i` - то перед установкой, система будет предварительно очищена от ранее установленных версий.
Выглядеть эта команда будет так:
```
git clone https://github.com/K-a-R-e-N/HomeAssistant-Install-Script
bash ~/HomeAssistant-Install-Script/InstallHA.sh -u -i -d
```

>##### _Если в вашей системе ранее был установлен Home Assistant и HASS конфигуратор, то прежде чем приступить к установке, надо предварительно очистить систему._

#### _Ключи тихой установки:_
* `-i` - Установка Home Assistant на чистой системе.
* `-u` - Полное удаление Home Assistant с очисткой системы.
* `-r` - Установка Home Assistant с полным удалением старой версии.
* `-d` - Самоудаление папки со скриптом установки.
* `-h` - Вызов справки.
_Ключ `-r` делает тоже самое что и два ключа `-u`+`-i` запущение вместе_
 
#### _Ключи тихой установки имеют очередность!_
```
InstallHA.sh [-i] [-u] [-r] [-d] [-h]
```

Сначала `-i`, потом `-u`, далее `-r` и т.д `-d` `-h`
>##### _Если поставить перед ключом `-u` ключ `-i`, то установщик его нормально отработает, но если поставить ключ `-d`, то скрипт сработает с ключа который первее, то есть с `-i`._

### ПОСЛЕДУЮЩЕЕ ОБНОВЛЕНИЕ
Для обновления до последней версии Home Assistant выполните следующие простые шаги:
```
sudo -u homeassistant -H -s
source /srv/homeassistant/bin/activate
pip3 install --upgrade homeassistant
sudo systemctl restart homeassistant@homeassistant.service 
#Готово
```
#### _Если Home Assistant не запускается, не забудьте проверить критические изменения в [заметках о выпуске](https://github.com/home-assistant/home-assistant/releases)_
